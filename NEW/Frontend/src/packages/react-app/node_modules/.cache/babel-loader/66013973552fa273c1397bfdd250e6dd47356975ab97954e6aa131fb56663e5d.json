{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useReducer } from 'react';\nimport { useDebounce } from '../../../hooks';\nimport { useReadonlyNetworks } from '../../network';\nimport { BlockNumbersContext } from './context';\nimport { blockNumberReducer } from '../common/reducer';\nimport { subscribeToNewBlock } from '../common/subscribeToNewBlock';\nimport { useWindow } from '../../window';\nimport { useIsMounted } from '../../../hooks/useIsMounted';\nexport function BlockNumbersProvider({\n  children\n}) {\n  const networks = useReadonlyNetworks();\n  const [state, dispatch] = useReducer(blockNumberReducer, {});\n  const isActive = useWindow();\n  const isMounted = useIsMounted();\n  useEffect(() => {\n    const onUnmount = Object.entries(networks).map(([chainId, provider]) => subscribeToNewBlock(provider, Number(chainId), (...args) => {\n      if (isMounted()) {\n        dispatch(...args);\n      }\n    }, isActive));\n    return () => onUnmount.forEach(fn => fn());\n  }, [networks]);\n  const debouncedState = useDebounce(state, 100);\n  return _jsx(BlockNumbersContext.Provider, {\n    value: debouncedState,\n    children: children\n  });\n}","map":{"version":3,"names":["useEffect","useReducer","useDebounce","useReadonlyNetworks","BlockNumbersContext","blockNumberReducer","subscribeToNewBlock","useWindow","useIsMounted","BlockNumbersProvider","children","networks","state","dispatch","isActive","isMounted","onUnmount","Object","entries","map","chainId","provider","Number","args","forEach","fn","debouncedState","_jsx","Provider","value"],"sources":["C:\\Users\\win\\Downloads\\clone res gi\\clone\\my-eth-app\\node_modules\\@usedapp\\core\\src\\providers\\blockNumber\\blockNumbers\\provider.tsx"],"sourcesContent":["import { ReactNode, useEffect, useReducer } from 'react'\nimport { useDebounce } from '../../../hooks'\nimport { useReadonlyNetworks } from '../../network'\nimport { BlockNumbersContext } from './context'\nimport { blockNumberReducer } from '../common/reducer'\nimport { subscribeToNewBlock } from '../common/subscribeToNewBlock'\nimport { useWindow } from '../../window'\nimport { useIsMounted } from '../../../hooks/useIsMounted'\n\ninterface Props {\n  children: ReactNode\n}\n\nexport function BlockNumbersProvider({ children }: Props) {\n  const networks = useReadonlyNetworks()\n  const [state, dispatch] = useReducer(blockNumberReducer, {})\n  const isActive = useWindow()\n  const isMounted = useIsMounted()\n\n  useEffect(() => {\n    const onUnmount = Object.entries(networks).map(([chainId, provider]) =>\n      subscribeToNewBlock(\n        provider,\n        Number(chainId),\n        (...args: Parameters<typeof dispatch>) => {\n          if (isMounted()) {\n            dispatch(...args)\n          }\n        },\n        isActive\n      )\n    )\n\n    return () => onUnmount.forEach((fn) => fn())\n  }, [networks])\n\n  const debouncedState = useDebounce(state, 100)\n\n  return <BlockNumbersContext.Provider value={debouncedState} children={children} />\n}\n"],"mappings":";AAAA,SAAoBA,SAAS,EAAEC,UAAU,QAAQ,OAAO;AACxD,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,mBAAmB,QAAQ,eAAe;AACnD,SAASC,mBAAmB,QAAQ,WAAW;AAC/C,SAASC,kBAAkB,QAAQ,mBAAmB;AACtD,SAASC,mBAAmB,QAAQ,+BAA+B;AACnE,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,YAAY,QAAQ,6BAA6B;AAM1D,OAAM,SAAUC,oBAAoBA,CAAC;EAAEC;AAAQ,CAAS;EACtD,MAAMC,QAAQ,GAAGR,mBAAmB,EAAE;EACtC,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,UAAU,CAACI,kBAAkB,EAAE,EAAE,CAAC;EAC5D,MAAMS,QAAQ,GAAGP,SAAS,EAAE;EAC5B,MAAMQ,SAAS,GAAGP,YAAY,EAAE;EAEhCR,SAAS,CAAC,MAAK;IACb,MAAMgB,SAAS,GAAGC,MAAM,CAACC,OAAO,CAACP,QAAQ,CAAC,CAACQ,GAAG,CAAC,CAAC,CAACC,OAAO,EAAEC,QAAQ,CAAC,KACjEf,mBAAmB,CACjBe,QAAQ,EACRC,MAAM,CAACF,OAAO,CAAC,EACf,CAAC,GAAGG,IAAiC,KAAI;MACvC,IAAIR,SAAS,EAAE,EAAE;QACfF,QAAQ,CAAC,GAAGU,IAAI,CAAC;;IAErB,CAAC,EACDT,QAAQ,CACT,CACF;IAED,OAAO,MAAME,SAAS,CAACQ,OAAO,CAAEC,EAAE,IAAKA,EAAE,EAAE,CAAC;EAC9C,CAAC,EAAE,CAACd,QAAQ,CAAC,CAAC;EAEd,MAAMe,cAAc,GAAGxB,WAAW,CAACU,KAAK,EAAE,GAAG,CAAC;EAE9C,OAAOe,IAAA,CAACvB,mBAAmB,CAACwB,QAAQ;IAACC,KAAK,EAAEH,cAAc;IAAEhB,QAAQ,EAAEA;EAAQ,EAAI;AACpF"},"metadata":{},"sourceType":"module","externalDependencies":[]}